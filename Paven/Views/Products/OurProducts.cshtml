@model PagedList.IPagedList<Paven.Models.Product>
@using PagedList.Mvc;

@{
    ViewBag.Title = "Home";
}

<h2 class="text-center text-info" >Our Products</h2>

<style>

    .productimage {
        height: 50rem;
        width: 40rem;
    }

    .product-title {
        font-size: 5rem;
        color: #000;
    }

    .product-price {
        font-size: 3.5rem;
        font-weight: 300;
        margin-top: -3rem;
        color: #F60018;
    }

    .page__heading {
        margin: 5rem 2rem 2rem 2rem;
        text-transform: uppercase;
        font-size: 3rem;
        line-height: 1.2;
        letter-spacing: 2px;
        font-weight: 700;
        color: #000;
    }

    .cart-grid {
        display: grid;
        grid-template-columns: 10% 80% 10%;
        height: 95vh;
    }

    .cart-grid-column--content {
        position: relative;
    }

    .cart {
        margin: 2rem 30rem;
        height: 80rem;
        width: 60rem;
        padding: 3rem 2rem;
        background-color: rgba(61, 137, 220, 0.5);
    }

    .order-card {
        display: flex;
        height: 13rem;
        width: auto;
        justify-content: space-between;
        color: #fff;
        margin: 1rem 2rem;
        box-shadow: 1px 1px 6px rgba(0, 0, 0, 0.3);
        padding: 3rem;
    }

        .order-card:hover {
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);
        }

    .info {
        flex: 1;
        text-transform: uppercase;
    }

    .info--product {
        color: #000;
        font-size: 1.7rem;
        font-weight: 600;
        letter-spacing: 0.3rem;
        margin-bottom: 1rem;
    }

    .info--price {
        font-size: 1.2rem;
        font-weight: 400;
        letter-spacing: 0.4rem;
        color: #F60018;
    }

    .link,
    .link > a {
        flex: 5;
        position: relative;
        letter-spacing: 0.2rem;
        text-decoration: none;
        text-transform: uppercase;
        font-size: 1.2rem;
        display: block;
        color: #000;
    }

        .link-remove:link,
        .link > a-remove:link {
            position: absolute;
            bottom: 30%;
            right: 1rem;
        }

        .link-wishlist:link,
        .link > a-wishlist:link {
            position: absolute;
            bottom: 10%;
            right: 1rem;
        }

    .product-grid {
        height: 50vh;
        width: auto;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        justify-items: center;
        align-content: center;
    }

    .pagination {
        display: inline-block;
        padding-left: 0;
        margin: 20px 0;
        border-radius: 4px;
    }

        .pagination > li {
            display: inline;
        }

            .pagination > li > a,
            .pagination > li > span {
                position: relative;
                float: left;
                padding: 6px 12px;
                margin-left: -1px;
                line-height: 1.428571429;
                text-decoration: none;
                background-color: #ffffff;
                border: 1px solid #dddddd;
            }

            .pagination > li:first-child > a,
            .pagination > li:first-child > span {
                margin-left: 0;
                border-bottom-left-radius: 4px;
                border-top-left-radius: 4px;
            }

            .pagination > li:last-child > a,
            .pagination > li:last-child > span {
                border-top-right-radius: 4px;
                border-bottom-right-radius: 4px;
            }

            .pagination > li > a:hover,
            .pagination > li > span:hover,
            .pagination > li > a:focus,
            .pagination > li > span:focus {
                background-color: #eeeeee;
            }

        .pagination > .active > a,
        .pagination > .active > span,
        .pagination > .active > a:hover,
        .pagination > .active > span:hover,
        .pagination > .active > a:focus,
        .pagination > .active > span:focus {
            z-index: 2;
            color: #ffffff;
            cursor: default;
            background-color: #428bca;
            border-color: #428bca;
        }

        .pagination > .disabled > span,
        .pagination > .disabled > a,
        .pagination > .disabled > a:hover,
        .pagination > .disabled > a:focus {
            color: #999999;
            cursor: not-allowed;
            background-color: #ffffff;
            border-color: #dddddd;
        }

    .pagination-lg > li > a,
    .pagination-lg > li > span {
        padding: 10px 16px;
        font-size: 18px;
    }

    .pagination-lg > li:first-child > a,
    .pagination-lg > li:first-child > span {
        border-bottom-left-radius: 6px;
        border-top-left-radius: 6px;
    }

    .pagination-lg > li:last-child > a,
    .pagination-lg > li:last-child > span {
        border-top-right-radius: 6px;
        border-bottom-right-radius: 6px;
    }

    .pagination-sm > li > a,
    .pagination-sm > li > span {
        padding: 5px 10px;
        font-size: 12px;
    }

    .pagination-sm > li:first-child > a,
    .pagination-sm > li:first-child > span {
        border-bottom-left-radius: 3px;
        border-top-left-radius: 3px;
    }

    .pagination-sm > li:last-child > a,
    .pagination-sm > li:last-child > span {
        border-top-right-radius: 3px;
        border-bottom-right-radius: 3px;
    }

    .pager {
        padding-left: 0;
        margin: 20px 0;
        text-align: center;
        list-style: none;
    }

        .pager:before,
        .pager:after {
            display: table;
            content: " ";
        }

        .pager:after {
            clear: both;
        }

        .pager:before,
        .pager:after {
            display: table;
            content: " ";
        }

        .pager:after {
            clear: both;
        }

        .pager li {
            display: inline;
        }

            .pager li > a,
            .pager li > span {
                display: inline-block;
                padding: 5px 14px;
                background-color: #ffffff;
                border: 1px solid #dddddd;
                border-radius: 15px;
            }

                .pager li > a:hover,
                .pager li > a:focus {
                    text-decoration: none;
                    background-color: #eeeeee;
                }

        .pager .next > a,
        .pager .next > span {
            float: right;
        }

        .pager .previous > a,
        .pager .previous > span {
            float: left;
        }

        .pager .disabled > a,
        .pager .disabled > a:hover,
        .pager .disabled > a:focus,
        .pager .disabled > span {
            color: #999999;
            cursor: not-allowed;
            background-color: #ffffff;


        }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        // Document.ready -> link up remove event handler
        $(".AddLink").click(function () {
            // Get the id from the link
            var recordToAdd = $(this).attr("data-id");
            if (recordToAdd != '') {
                // Perform the ajax post
                $.post("/ShoppingCart/AddToCart", { "id": recordToAdd },
                    function (data) {
                        $('#cart-status').text(data.CartCount);
                    });
            }
        });
    });
</script>

<div class="bs-docs-section">
    <div class="row">
        @using (Html.BeginForm("OurProducts", "Products", FormMethod.Get))
        {
            <div class="form-group">
                <div class="input-group">
                    <div class="searchdiv">
                        @Html.TextBox("SearchString", ViewBag.CurrentFilter as string, new { placeholder = "Enter a product name here." })
                        <input type="submit" class="btn btn-info btn-lg" value="Search" />
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<!-- Button trigger modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <div aria-hidden="true" class="alert alert-dismissable alert-success">
        <button type="button" class="close" data-dismiss="alert">×</button>
        <strong>An item was added to your cart.</strong> To check out now simply <a href="#" class="alert-link">click here</a>.
    </div>

    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Confirm check out.</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to checkout?</p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Keep Shopping</button>
                <button type="submit" class="btn btn-primary" onclick="location.href='@Url.Action("Index", "ShoppingCart")'">Check Out</button>
            </div>
        </div>
    </div>
</div>

<!-- product grid of three 4x5 images + heading and price -->
<div class="product-grid">
    @foreach (var item in Model)
    {
        <div class="card">
            <a href="~/Products/Details/@item.ProductId"><img src="data:image;base64,@System.Convert.ToBase64String(item.ProductImage)" alt="card image" class="card__image"></a>
            <div class="card__info">
                <h3 class="card__info--primary"> @Html.DisplayFor(modelItem => item.ProductName)</h3>
                <h3 class="card__info--secondary">R @Html.DisplayFor(modelItem => item.ProductPrice)</h3>
            </div>
            <a href="#" class="AddLink" data-id="@item.ProductId" data-toggle="modal" data-target="#myModal">Add to cart</a>
            <!--@Html.ActionLink("Add to cart", "AddToCart", "ShoppingCart", new { id = item.ProductId }, new { htmlAttributes = new { @data_toggle = "modal", @data_target = "#myModal" } })--> |
            @Html.ActionLink("Details", "Details", new { id = item.ProductId }) |
            @if (Request.IsAuthenticated && User.IsInRole("Admin"))
            {
                @Html.ActionLink("Edit ", "Edit", new { id = item.ProductId })
                @Html.ActionLink(" | Delete", "Delete", new { id = item.ProductId })
            }
        </div>
    }
</div>

<br />
<br />
<br />
<br />
<br />
Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

@Html.PagedListPager(Model, page => Url.Action("OurProducts", new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
